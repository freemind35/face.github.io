<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Gestione Spese Fabrizio e Cecilia</title>
  <meta name="theme-color" content="#0ea5e9" />
  <style>
    :root{ --bg:#0b1220; --card:#111827; --muted:#6b7280; --text:#e5e7eb; --brand:#0ea5e9; --ok:#10b981; --danger:#ef4444; --shadow:0 10px 30px rgba(0,0,0,.35); --radius:20px; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{ margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; background: radial-gradient(1200px 800px at 75% -200px, rgba(14,165,233,.35), transparent 60%), var(--bg); color:var(--text); }
    .wrap{max-width:820px;margin:0 auto;padding:20px}
    header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg, rgba(11,18,32,.97), rgba(11,18,32,.85));backdrop-filter: blur(6px)}
    .bar{display:flex;align-items:center;gap:8px;padding:12px 16px}
    .title{font-weight:700;letter-spacing:.3px}
    .badge{font-size:12px;color:white;background:linear-gradient(135deg,#22d3ee,#3b82f6);padding:4px 8px;border-radius:999px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);box-shadow:var(--shadow);border-radius:var(--radius);padding:16px}
    .muted{color:var(--muted)} .grid{display:grid;gap:12px}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .grid-3{display:grid;grid-template-columns:1.4fr 1fr 1fr;gap:10px}
    @media (max-width:700px){.grid-3{grid-template-columns:1fr}}
    input,select,button{width:100%;padding:14px 14px;border-radius:14px;border:1px solid rgba(255,255,255,.12);background:#0f1626;color:var(--text);outline:none}
    input::placeholder{color:#9ca3af}
    button{cursor:pointer;font-weight:600;letter-spacing:.3px;transition:.2s transform ease,.2s opacity ease}
    button.primary{background:linear-gradient(135deg,#06b6d4,#3b82f6);border-color:transparent;color:white}
    button.ghost{background:transparent;border-color:rgba(255,255,255,.18)}
    button:hover{transform:translateY(-1px)}
    label{font-size:12px;text-transform:uppercase;color:#9ca3af;letter-spacing:.6px;margin-bottom:6px;display:block}
    .row{display:flex;gap:10px;align-items:center} .row>*{flex:1}
    .section-title{font-weight:700;margin:8px 0 12px 0}
    .list{display:grid;gap:8px;margin-top:12px}
    .item{display:flex;align-items:center;gap:10px;padding:12px;border:1px solid rgba(255,255,255,.08);background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));border-radius:14px}
    .item .desc{color:#cbd5e1}
    .item .meta{font-size:12px;color:#94a3b8}
    .amount{font-weight:800}
    .totals{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:10px}
    @media (max-width:820px){.totals{grid-template-columns:1fr 1fr}}
    .tot-card{padding:12px;border:1px solid rgba(255,255,255,.08);border-radius:14px;background:#0e1525}
    .tot-card h4{margin:0 0 6px 0;font-size:13px;color:#9ca3af}
    .tot-card div{font-size:20px;font-weight:800}
    .pos{color:#bbf7d0} .neg{color:#fecaca}
  </style>
</head>
<body>
  <header>
    <div class="bar wrap">
      <div class="title">üí∞ Gestione Spese Fabrizio e Cecilia</div>
      <span class="badge">Entrate & Uscite</span>
      <div class="right small" id="userEmail"></div>
    </div>
  </header>

  <main class="wrap grid" style="margin-top:10px">
    <!-- AUTH (admin@local.com / adminadmin) -->
    <section class="card" id="authCard">
      <div class="section-title">Accesso</div>
      <div class="grid-2">
        <div>
          <label>Utente</label>
          <input id="username" type="text" placeholder="admin oppure admin@local.com" value="admin" autocomplete="username" />
        </div>
        <div>
          <label>Password</label>
          <div class="row" style="gap:6px">
            <input id="password" type="password" placeholder="min 6 caratteri (es. adminadmin)" autocomplete="current-password" />
            <button class="ghost" id="togglePw" style="max-width:110px">Mostra</button>
          </div>
        </div>
      </div>
      <div class="row" style="margin-top:10px">
        <button class="primary" id="btnLogin">Entra</button>
      </div>
      <div class="small muted" style="margin-top:8px">Credenziali consigliate: <b>admin@local.com / adminadmin</b></div>
      <div id="authMsg" class="small"></div>
    </section>

    <!-- APP -->
    <section class="grid" id="app" style="display:none">

      <!-- Inserimento movimento -->
      <section class="card">
        <div class="grid-3">
          <div>
            <label>Descrizione</label>
            <input id="desc" type="text" placeholder="Es. bolletta luce / stipendio" />
          </div>
          <div>
            <label>Importo (‚Ç¨)</label>
            <input id="amount" type="text" inputmode="decimal" placeholder="0,00" />
          </div>
          <div>
            <label>Tipo</label>
            <select id="type">
              <option value="" disabled selected>Seleziona</option>
              <option value="in">Entrata</option>
              <option value="out">Uscita</option>
            </select>
          </div>
        </div>

        <div class="grid-3" style="margin-top:8px">
          <div>
            <label>Conto</label>
            <select id="account">
              <option value="" disabled selected>Scegli conto</option>
              <option value="banca1">Biper erediFrioni</option>
              <option value="banca2">Biper Fabrizio&Ceci</option>
              <option value="contanti">Contanti</option>
            </select>
          </div>
          <div>
            <label>Data (default oggi)</label>
            <input id="date" type="date" />
            <div class="small muted">‚úîÔ∏è Puoi inserire movimenti <b>precedenti</b> alla data attuale.</div>
          </div>
          <div style="display:flex;align-items:flex-end">
            <button class="primary" id="btnAdd">Aggiungi</button>
          </div>
        </div>
        <div class="row" style="margin-top:10px">
          <button class="ghost" id="btnClear">Pulisci</button>
          <div id="addMsg" class="small"></div>
        </div>
      </section>

      <!-- Totali e saldi -->
      <section class="card">
        <div class="row" style="align-items:flex-end; gap:12px; flex-wrap:wrap">
          <div style="flex:1; min-width:200px">
            <label>Filtro mese</label>
            <input id="month" type="month" />
          </div>
          <div style="flex:1; min-width:200px">
            <label>Conto</label>
            <select id="fAccount">
              <option value="">Tutti i conti</option>
              <option value="banca1">Biper erediFrioni</option>
              <option value="banca2">Biper Fabrizio&Ceci</option>
              <option value="contanti">Contanti</option>
            </select>
          </div>
          <div class="row" style="gap:8px; flex:2">
            <button class="ghost" id="btnThisMonth" style="max-width:160px">Questo mese</button>
            <button class="ghost" id="btnLastMonth" style="max-width:160px">Mese scorso</button>
            <button class="ghost" id="btnClearFilter" style="max-width:120px">Tutti</button>
            <button class="ghost" id="btnExport" style="max-width:140px">Esporta CSV</button>
            <button class="ghost" id="btnLogout" style="max-width:120px">Esci</button>
          </div>
        </div>

        <div class="totals">
          <div class="tot-card"><h4>Saldo periodo</h4><div id="totSaldo">‚Ç¨ 0,00</div></div>
          <div class="tot-card"><h4>Entrate</h4><div id="totIn" class="pos">‚Ç¨ 0,00</div></div>
          <div class="tot-card"><h4>Uscite</h4><div id="totOut" class="neg">‚Ç¨ 0,00</div></div>
          <div class="tot-card"><h4>Movimenti</h4><div id="totCount">0</div></div>
        </div>

        <div class="totals" style="margin-top:8px">
          <div class="tot-card"><h4>Saldo Iniziale Biper erediFrioni</h4><div id="initB1">‚Ç¨ 0,00</div></div>
          <div class="tot-card"><h4>Saldo Iniziale Biper Fabrizio&Ceci</h4><div id="initB2">‚Ç¨ 0,00</div></div>
          <div class="tot-card"><h4>Saldo Iniziale Contanti</h4><div id="initCash">‚Ç¨ 0,00</div></div>
          <div class="tot-card"><h4>Saldo Totale Iniziale</h4><div id="initTotal">‚Ç¨ 0,00</div></div>
        </div>

        <div class="totals" style="margin-top:8px">
          <div class="tot-card"><h4>Saldo Attuale Biper erediFrioni</h4><div id="balB1">‚Ç¨ 0,00</div></div>
          <div class="tot-card"><h4>Saldo Attuale Biper Fabrizio&Ceci</h4><div id="balB2">‚Ç¨ 0,00</div></div>
          <div class="tot-card"><h4>Saldo Attuale Contanti</h4><div id="balCash">‚Ç¨ 0,00</div></div>
          <div class="tot-card"><h4>Saldo Totale Attuale</h4><div id="balTotal">‚Ç¨ 0,00</div></div>
        </div>

        <div class="list" id="list"></div>
      </section>
    </section>
  </main>

  <!-- Nota: la logica per gestire i saldi iniziali (anche negativi) andr√† aggiunta nello script JS -->
</body>
</html>
